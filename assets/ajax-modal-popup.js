$(function () {
    $(document).on('click', '.showModalButton', function (e) {
        targetModal = $(this).attr('data-modal');
        if (targetModal == undefined) targetModal = '#popup-modal';
        targetModalHeader = $(this).attr('data-modal-header');
        if (targetModalHeader == undefined) targetModalHeader = '#popup-modal-header';
        targetModalContent = $(this).attr('data-modal-content');
        if (targetModalContent == undefined) targetModalContent = '#popup-modal-content';
        $(targetModalContent).html('<img class="center-block" src="data:;base64,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" />');
        if (!$(targetModal).data('bs.modal').isShown) {
            $(targetModal).modal('show');
        }
        if ($(targetModal).attr('pjax-callback-container') == undefined) {
            $(targetModal).attr('pjax-callback-container', $(this).attr('data-modal-pjax-callback-container'));
        }
        pjaxCallback = function () {
            if (matches = $(targetModalContent).text().match(/^location:(.+)/)) {
                $(targetModal).delay(500).modal('hide');
                if ($(targetModal).attr('pjax-callback-container') != undefined) {
                    $.pjax({
                        container: $(targetModal).attr('pjax-callback-container'),
                        url: matches[1]
                    });
                }
            }
        };
        if ($(this).attr('type') == "submit") $(targetModalContent).load($(this).parent().attr("action"), $(this).parent().serializeArray(), pjaxCallback);
        else $(targetModalContent).load($(this).attr('href'), '', pjaxCallback);
        $(targetModalHeader).html('<h4>' + $(this).attr('data-title') + '</h4>');
        e.stopPropagation();
        e.preventDefault();
    });
});